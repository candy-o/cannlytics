<!doctype>
<html>
  <!-- Console Sidebar -->
  <!-- TODO: Make minimizable -->

  {% load static icon %}

  <nav
    id="sidebar-menu"
    class="col-md-3 col-lg-2 d-md-block bg-light sidebar sidebar-sticky collapse pt-0"
  >
    <div class="">

      <!-- Create Organization Prompt -->
      {% if not organization and not user.disabled_org_prompt and False %}
        <div class="text-center border-bottom px-2 pb-4">
          <!-- Optional: Close message button -->
          <img
            src="{% static 'console/images/icons/multi-tone/lab_large.png' %}"
            style="width:175px;"
          >
          <h4 class="fs-5 mt-0 mb-0 fw-bold">Get started</h4>
          <p class=""><small>Create or join an organization to get started.</small></p>
          <div class="d-flex align-items-center justify-content-center mt-2">
            <a
              class="btn btn-sm bg-gradient-orange text-white text-no-wrap me-1"
              href="/organizations"
            >
              Setup your Organization
            </a>
          </div>
        </div>
      {% endif %}

      <!-- Main Index -->
      {% comment %} <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-4 mb-2 text-muted">
        <span>Main</span>
      </h6> {% endcomment %}
      <ul class="nav flex-column pt-2">
        {% for item in sidebar.lab_index %}
          {% if user.type in item.user_type or item.user_type == '*' %}
            <li class="nav-item px-2 mb-1 {% if item.seperator %}border-top pt-2 mt-1{% endif %}">
              <a
                class="nav-link d-flex {% if item.nested %} justify-content-between {% endif %} py-1 px-3 {% if item.slug == screen %}active{% endif %}"
                href="{{ item.url }}"
              >
                {% if item.icon %}
                  {% icon item.icon class="me-2" height="16" width="16" %}
                {% endif %}
                {{ item.title }}
                {% if item.nested %}
                  <img src="{% static 'console/images/layout/arrow_drop_down_light.svg' %}" class="arrow light-only"/>
                  <img src="{% static 'console/images/layout/arrow_drop_down_dark.svg' %}" class="arrow dark-only"/>
                {% endif %}
              </a>
            </li>
            <!-- TODO: Implement nested navigation! -->
            {% if item.nested %}
              <div
                id="{{ item.slug }}-items"
                class="panel-collapse collapse {% if item.slug == screen %}show{% endif %}"
              >
                <ul class="list-group sub-menu">
                  {% for sub_item in item.nested %}
                  <li class="nav-item px-2 mb-1 ps-4 {% if sub_item.slug == unit and item.product == section %}active{% endif %}">
                    <a
                      class="nav-link d-flex py-1 px-3"
                      href="{{ sub_item.url }}"
                    >
                      <small class="serif">{{ sub_item.title }}</small>
                    </a>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

          {% endif %}
        {% endfor %}
      </ul><!-- End of main index -->

    <!-- Bottom option -->
    {% comment %} <div class="w-100 text-center mt-5 mb-3 position-absolute bottom-0">
      <a
        class="h6 btn btn-sm btn-outline-orange"
        href="https://cannlytics.com/support"
        target="_blank"
      >
        {% icon "life-buoy" class="me-2" height="16" width="16" %}
        Get support
      </a>
    </div> {% endcomment %}

    </div>


    <!-- Toggle Sidebar
      data-bs-toggle="collapse"
      data-bs-target="#sidebar-menu"
      aria-controls="sidebar-menu"
      aria-expanded="false"
      aria-label="Toggle navigation"
    -->
    <button
      id="sidebar-toggle"
      class="d-none d-md-flex btn nav-link navbar-toggle position-absolute text-secondary"
      style="right:0; bottom:.25rem; background: transparent;"
      role="button"
      type="button"
      onclick="cannlytics.ui.hideSidebar();"
      data-bs-toggle="tooltip"
      data-bs-placement="right"
      title="Hide the sidebar"
    >
      {% icon "sidebar" width="16px" height="16px" %}
    </button>

  </nav>

  <!-- TODO: Show nav menu instead? -->
  <!-- <button
    id="sidebar-console-toggle"
    class="btn nav-link navbar-toggle d-flex position-absolute text-secondary"
    style="left:0; bottom:42px; width:unset; background: transparent; z-index: 1000;"
    role="button"
    type="button"
    onclick="cannlytics.ui.showSidebar();"
    data-bs-toggle="tooltip"
    data-bs-placement="right"
    title="Show the sidebar"
  >
    {% icon "sidebar" width="16px" height="16px" %}
  </button> -->

</html>
